# KIS Demoシステム - システム全体概要

## 📋 概要

KIS Demo（Keep It Simple Demonstration Project）は、モダンなWeb開発技術の実装例として開発されたフルスタックWebアプリケーションです。シンプルで理解しやすいコード構造を特徴とし、React + TypeScript（フロントエンド）とNode.js + Express（バックエンド）による3層アーキテクチャを採用しています。

## 🎯 システムの目的・特徴

### 主要目的
- モダンなWeb開発技術のベストプラクティス実証
- フルスタック開発の基本パターン学習
- 権限ベースアクセス制御（RBAC）の実装例
- 顧客・商品・注文管理業務の統合システム

### 設計原則
- **KIS (Keep It Simple)**: シンプルで理解しやすい構造
- **型安全性**: TypeScriptによる堅牢な開発
- **レスポンシブデザイン**: モバイルファーストアプローチ
- **スケーラビリティ**: 拡張可能な設計

## 🏗️ システム構成図

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Frontend      │    │   Backend       │    │   Database      │
│   (React SPA)   │◄──►│   (Express API) │◄──►│   (SQLite)      │
│   Port: 5173    │    │   Port: 3001    │    │   File: app.db  │
└─────────────────┘    └─────────────────┘    └─────────────────┘
│                      │                      │
│ • React 18           │ • Express.js         │ • Users
│ • TypeScript         │ • TypeScript         │ • Customers
│ • Vite               │ • JWT Auth           │ • Products  
│ • Styled Components  │ • Role-based Access  │ • Orders
│ • React Router       │ • RESTful API        │ • Permissions
│ • Axios              │ • Middleware Stack   │ • Order Items
```

## 🔧 技術スタック

### フロントエンド
| 技術 | バージョン | 役割 |
|-----|----------|------|
| React | 18.2.0 | UIライブラリ |
| TypeScript | 5.2.2 | 型安全性 |
| Vite | 5.0.0 | 開発サーバー・ビルドツール |
| Styled Components | 6.1.1 | CSS-in-JS スタイリング |
| React Router | 6.20.1 | クライアントサイドルーティング |
| Axios | 1.6.2 | HTTP通信 |

### バックエンド
| 技術 | バージョン | 役割 |
|-----|----------|------|
| Node.js | 18.0.0+ | JavaScriptランタイム |
| Express.js | 4.18.2 | Webフレームワーク |
| TypeScript | 5.2.2 | 型安全性 |
| SQLite | 5.1.6 | 軽量データベース |
| bcryptjs | 2.4.3 | パスワードハッシュ化 |
| jsonwebtoken | 9.0.2 | JWT認証 |
| Zod | 3.22.4 | スキーマバリデーション |

### 開発・運用ツール
| 技術 | 役割 |
|-----|------|
| ESLint | コード品質管理 |
| Prettier | コードフォーマッター |
| Vitest | テストフレームワーク |
| Docker | コンテナ化 |
| Concurrently | 並行実行 |

## 🏛️ アーキテクチャ設計

### 3層アーキテクチャ

#### プレゼンテーション層（フロントエンド）
```
┌────────────────────────────────────────┐
│ Pages (画面コンポーネント)               │
├────────────────────────────────────────┤
│ Components (再利用可能コンポーネント)     │
├────────────────────────────────────────┤
│ Hooks (ビジネスロジック)                │
├────────────────────────────────────────┤
│ Utils/API (データアクセス)              │
└────────────────────────────────────────┘
```

#### ビジネスロジック層（バックエンド）
```
┌────────────────────────────────────────┐
│ Controllers (業務ロジック)              │
├────────────────────────────────────────┤
│ Middleware (認証・権限・バリデーション)   │
├────────────────────────────────────────┤
│ Models (データアクセス)                 │
└────────────────────────────────────────┘
```

#### データ層（データベース）
```
┌────────────────────────────────────────┐
│ SQLite Database                        │
│ • users, customers, products           │
│ • orders, order_items                  │
│ • permission_matrix                    │
└────────────────────────────────────────┘
```

## 🚀 主要機能

### 1. 認証・権限管理
- JWT（JSON Web Token）ベース認証
- ロールベースアクセス制御（admin/user）
- 権限マトリックスによる細かい権限制御
- セッション管理

### 2. 顧客管理
- 顧客情報の登録・編集・検索
- 顧客コードによる一意管理
- 連絡先情報管理

### 3. 商品管理
- 商品情報の登録・編集・検索
- 商品コードによる一意管理
- 在庫数量管理
- カテゴリ分類

### 4. 注文管理
- 注文の作成・編集・ステータス管理
- 注文明細（複数商品対応）
- 売上計算・集計

### 5. 統合ダッシュボード
- リアルタイム統計表示
- 売上推移グラフ
- クイックアクション
- 最近の活動履歴

### 6. 権限マトリックス表示
- ユーザー × 機能の権限可視化
- CRUD操作別権限表示

## 🔗 外部・内部インターフェース

### 外部インターフェース
- **フロントエンド**: HTTP/HTTPS通信（REST API）
- **管理者**: Webブラウザ経由でのシステム管理
- **開発者**: Docker Compose経由での開発環境

### 内部インターフェース
- **認証API**: JWT Token, bcrypt暗号化
- **データベースAPI**: SQLiteドライバー経由
- **ミドルウェア**: Express.js middleware chain

## 🌐 運用環境

### 開発環境
- **フロントエンド**: http://localhost:5173
- **バックエンド**: http://localhost:3001  
- **データベース**: backend/data/app.db (SQLite)

### 推奨システム要件
- **Node.js**: 18.0.0以上
- **npm**: 9.0.0以上
- **メモリ**: 最低512MB、推奨1GB以上
- **ストレージ**: 最低100MB空き容量

### Docker環境
```yaml
services:
  frontend:
    ports: ["5173:5173"]
    build: ./frontend
    
  backend:
    ports: ["3001:3001"]
    build: ./backend
    depends_on: [frontend]
```

## 📊 システム規模

### データ規模（デモ環境）
- **ユーザー**: 2アカウント（admin, user）
- **顧客**: 約50件のサンプルデータ
- **商品**: 約30件のサンプルデータ
- **注文**: 約20件のサンプルデータ

### コード規模
- **フロントエンド**: 約15ファイル、2,000行
- **バックエンド**: 約20ファイル、1,500行
- **設定ファイル**: 約10ファイル
- **ドキュメント**: 約15ファイル

## 🔒 セキュリティ機能

### 認証・認可
- JWT Token（24時間有効期限）
- bcryptによるパスワードハッシュ化
- Role-based Access Control（RBAC）
- 権限マトリックスによる細かい制御

### セキュリティ対策
- CORS設定
- Helmet.jsによるセキュリティヘッダー
- 入力値バリデーション（Zod）
- SQLインジェクション対策（Prepared Statements）

## 🎨 UI/UX特徴

### デザイン原則
- **レスポンシブデザイン**: モバイル対応
- **アクセシビリティ**: 使いやすさ重視
- **一貫性**: 統一されたデザインシステム
- **直感性**: 分かりやすいナビゲーション

### 主要画面
1. **ダッシュボード**: 統計データとグラフ
2. **顧客管理**: 検索・一覧・詳細画面
3. **商品管理**: 在庫管理機能付き
4. **注文管理**: ステータス管理
5. **権限管理**: マトリックス表示

## 🔄 データフロー

### 典型的なリクエストフロー
```
Browser → Frontend → API Request → Backend → Database → Response → Frontend → Browser
```

### 認証フロー
```
Login → JWT Token → LocalStorage → API Header → Backend Validation → Protected Resource
```

## 📈 拡張可能性

### Phase 2: 機能拡張
- レポート・分析機能
- ファイル添付機能  
- 通知システム
- 在庫アラート

### Phase 3: スケーラビリティ
- PostgreSQL移行
- Redis キャッシュ
- マイクロサービス化
- API Gateway

### Phase 4: 高度なセキュリティ
- 多要素認証（MFA）
- シングルサインオン（SSO）
- 監査ログ
- HTTPS通信

---

*最終更新: 2024年1月15日*  
*作成者: システムアナリスト*
