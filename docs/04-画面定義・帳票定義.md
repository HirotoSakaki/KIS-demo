# KIS Demoシステム - 画面定義／帳票定義

## 📋 概要

KIS Demoシステムの全画面について、画面名、用途、主要項目、画面遷移、機能仕様を詳細に定義します。システムは10の主要画面で構成され、React SPAによるレスポンシブデザインを採用しています。

## 🎨 UI/UX設計コンセプト

### デザイン原則
- **レスポンシブデザイン**: モバイルファーストアプローチ
- **一貫性**: 統一されたコンポーネントライブラリ
- **アクセシビリティ**: 使いやすさを重視した設計
- **直感性**: 分かりやすいナビゲーション

### カラーパレット
- **プライマリ**: #0066cc（青）
- **セカンダリ**: #6c757d（グレー）
- **成功**: #28a745（緑）
- **警告**: #ffc107（黄）
- **危険**: #dc3545（赤）
- **情報**: #17a2b8（水色）

## 📱 画面一覧

### 画面構成図

```
┌─────────────────────────────────────────┐
│ Layout Component (共通レイアウト)          │
├─────────────────────────────────────────┤
│ Header + Sidebar + Main Content         │
│                                         │
│ ├── 🏠 DashboardPage                    │
│ ├── 👥 CustomersPage                    │
│ ├── 📦 ProductsPage                     │
│ ├── 📝 OrdersPage                       │
│ ├── 🤝 PartnersPage                     │
│ ├── 🏭 SuppliersPage                    │
│ ├── 💰 InvoicesPage                     │
│ ├── 📊 InventoryPage                    │
│ ├── 🔐 PermissionMatrixPage             │
│ └── 🔑 LoginPage (独立レイアウト)         │
└─────────────────────────────────────────┘
```

## 📄 詳細画面定義

### 1. ログイン画面（LoginPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/LoginPage.tsx`
- **URL**: `/login`
- **用途**: ユーザー認証
- **認証要否**: 不要（認証前画面）

#### 画面構成
```
┌─────────────────────────────────────┐
│           📋 KIS Demo              │
│                                    │
│ ┌─────────────────────────────────┐ │
│ │ ユーザー名: [_______________]    │ │
│ │ パスワード: [_______________]    │ │
│ │        [ログイン]              │ │
│ └─────────────────────────────────┘ │
│                                    │
│        デモ用アカウント              │
│ 管理者: admin / admin123            │
│ ユーザー: user / user123            │
└─────────────────────────────────────┘
```

#### 主要項目
| 項目名 | 型 | 必須 | 説明 |
|-------|---|-----|------|
| username | テキスト | ○ | ユーザー名 |
| password | パスワード | ○ | パスワード |

#### 機能仕様
- **認証処理**: JWT Token発行
- **バリデーション**: 必須入力チェック
- **エラーハンドリング**: 認証失敗時のメッセージ表示
- **デモ機能**: ワンクリックでデモアカウント入力
- **自動リダイレクト**: 認証成功時にダッシュボードへ遷移

#### 画面遷移
- **成功時**: `/dashboard` へリダイレクト
- **既認証時**: `/dashboard` へリダイレクト

---

### 2. ダッシュボード画面（DashboardPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/DashboardPage.tsx`
- **URL**: `/dashboard`
- **用途**: システム全体の統計情報表示・業務概要把握
- **認証要否**: 必要

#### 画面構成
```
┌─────────────────────────────────────────────────────────────┐
│ 🏢 統合管理システム - リアルタイム業務ダッシュボード              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐              │
│ │ 👥 127  │ │ 📦 89   │ │ 📝 256  │ │💰15.8億  │              │
│ │ 顧客数   │ │ 商品数   │ │ 注文数   │ │ 月間売上  │              │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────┐ ┌─────────────────────────────┐  │
│ │ 📈 過去2週間の売上推移    │ │ ⚡ クイックアクション         │  │
│ │ [グラフエリア]           │ │ [👥 新規顧客登録]           │  │
│ │                        │ │ [📦 商品登録]              │  │
│ │                        │ │ [📝 注文作成]              │  │
│ │                        │ │ [💸 請求書発行]            │  │
│ └─────────────────────────┘ │ 🔔 最近のアクティビティ       │  │
│                            │ [活動履歴リスト]            │  │
│                            └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

#### 主要項目
| セクション | 項目 | 説明 |
|-----------|------|------|
| 統計カード | 顧客数 | 総登録顧客数（先月比増減） |
| 統計カード | 商品数 | 総登録商品数（先月比増減） |
| 統計カード | 今月注文 | 当月の注文件数（先月比増減） |
| 統計カード | 月間売上 | 当月の売上金額（先月比増減） |
| グラフ | 売上推移 | 過去14日間の日別売上データ |
| クイックアクション | 登録ボタン | 各種新規登録画面へのショートカット |
| アクティビティ | 履歴 | 最新の業務活動（6件表示） |

#### 機能仕様
- **リアルタイム更新**: 統計データの動的表示
- **インタラクティブグラフ**: ホバーで詳細表示
- **アニメーション効果**: 数値のカウントアップ表示
- **ナビゲーション**: クイックアクションからの画面遷移

#### 画面遷移
- **顧客管理**: `/customers`
- **商品管理**: `/products`
- **注文管理**: `/orders`
- **請求書管理**: `/invoices`

---

### 3. 顧客管理画面（CustomersPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/CustomersPage.tsx`
- **URL**: `/customers`
- **用途**: 顧客情報の一覧表示・検索・管理
- **認証要否**: 必要

#### 画面構成
```
┌─────────────────────────────────────────────────────────────┐
│ 🏢 顧客管理 - 顧客情報・取引履歴・売上分析の統合管理           │
├─────────────────────────────────────────────────────────────┤
│ [検索ボックス] [ステータス▼] [タイプ▼] [新規顧客登録]        │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐              │
│ │ 📊 5     │ │ ✅ 5     │ │ 💰 18.3億│ │ 📋 68    │              │
│ │ 総顧客数  │ │ アクティブ│ │ 年間総売上│ │ 年間注文数│              │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐      │
│ │会社名│コード│担当者│タイプ│契約  │年間売上│注文数│与信  │操作  │      │
│ ├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤      │
│ │サンプル│CUST │田中太│大企業│企業  │8.5億 │24   │12.5/ │詳細  │      │
│ │自動車 │001  │郎   │     │     │     │     │50   │編集  │      │
│ │      │     │     │     │     │     │     │     │削除  │      │
│ └─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘      │
└─────────────────────────────────────────────────────────────┘
```

#### 主要項目
| 項目分類 | 項目名 | 表示内容 | 備考 |
|---------|-------|----------|------|
| 検索・フィルタ | 検索ボックス | 会社名、顧客コード、担当者、メール | 部分一致検索 |
| 検索・フィルタ | ステータス | アクティブ、非アクティブ、与信停止 | ドロップダウン |
| 検索・フィルタ | タイプ | 大企業、中小企業、スタートアップ、個人 | ドロップダウン |
| 統計 | 総顧客数 | 登録顧客の総数 | - |
| 統計 | アクティブ数 | アクティブ状態の顧客数 | - |
| 統計 | 年間総売上 | 全顧客の年間売上合計 | 億円単位 |
| 統計 | 年間総注文数 | 全顧客の年間注文数合計 | - |
| 一覧 | 会社名 | 顧客の会社名とメールアドレス | - |
| 一覧 | 顧客コード | 一意の顧客識別コード | - |
| 一覧 | 担当者 | 担当者名と業界情報 | - |
| 一覧 | タイプ | 顧客分類（バッジ表示） | 色分け |
| 一覧 | 契約種別 | regular/premium/enterprise | - |
| 一覧 | 年間売上 | 顧客別年間売上額 | 億円単位 |
| 一覧 | 年間注文数 | 顧客別年間注文件数 | - |
| 一覧 | 与信状況 | 使用額/限度額と使用率 | 万円単位 |
| 一覧 | ステータス | 現在の顧客ステータス | バッジ表示 |
| 一覧 | 営業担当 | 担当営業者名 | - |

#### 機能仕様
- **多条件検索**: 複数項目での絞り込み
- **リアルタイム統計**: フィルタ結果の統計更新
- **ソート機能**: 各カラムでのソート
- **CRUD操作**: 作成・参照・更新・削除（権限に応じて）
- **エクスポート**: CSV/Excel出力（将来実装）

#### 画面遷移
- **詳細画面**: 顧客詳細情報表示（将来実装）
- **編集画面**: 顧客情報編集フォーム（将来実装）
- **新規登録**: 顧客登録フォーム（将来実装）

---

### 4. 商品管理画面（ProductsPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/ProductsPage.tsx`
- **URL**: `/products`
- **用途**: 商品・サービスの一元管理とパフォーマンス分析
- **認証要否**: 必要

#### 画面構成
```
┌─────────────────────────────────────────────────────────────┐
│ 📦 商品管理 - 商品・サービスの一元管理とパフォーマンス分析     │
├─────────────────────────────────────────────────────────────┤
│ [検索ボックス] [ステータス▼] [タイプ▼] [新規商品登録]        │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐  │
│ │ 📦 5     │ │ ✅ 4     │ │ 📊1,501 │ │ 💰1,371 │ │ ⚠️ 1    │  │
│ │登録商品数 │ │ 販売中   │ │ 総在庫数 │ │年間販売数│ │在庫不足  │  │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘  │
├─────────────────────────────────────────────────────────────┤
│ ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐      │
│ │商品名│コード│カテゴ│タイプ│ブランド│価格  │在庫数│評価  │操作  │      │
│ ├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤      │
│ │ビジネス│PC-  │コンピ│物理  │TechSa│¥89.8│45   │★★★★☆│詳細  │      │
│ │ノートPC│BIZ- │ューター│商品 │mple  │k    │     │4.5   │編集  │      │
│ │Pro   │001  │     │     │     │     │     │     │削除  │      │
│ └─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘      │
└─────────────────────────────────────────────────────────────┘
```

#### 主要項目
| 項目分類 | 項目名 | 表示内容 | 備考 |
|---------|-------|----------|------|
| 検索・フィルタ | 検索ボックス | 商品名、商品コード、ブランド、カテゴリ | 部分一致検索 |
| 検索・フィルタ | ステータス | 販売中、販売終了、在庫切れ、予約受付 | ドロップダウン |
| 検索・フィルタ | タイプ | 物理商品、デジタル、サービス、サブスク、セット | ドロップダウン |
| 統計 | 登録商品数 | 総商品数 | - |
| 統計 | 販売中 | 販売中ステータスの商品数 | - |
| 統計 | 総在庫数 | 物理商品の在庫合計 | - |
| 統計 | 年間販売数 | 全商品の年間販売数合計 | - |
| 統計 | 在庫不足 | 最小在庫を下回る商品数 | 警告表示 |
| 一覧 | 商品名 | 商品名と商品説明 | - |
| 一覧 | 商品コード | 一意の商品識別コード | - |
| 一覧 | カテゴリ | 商品カテゴリ | - |
| 一覧 | タイプ | 商品タイプ（バッジ表示） | 色分け |
| 一覧 | ブランド | 商品ブランド | - |
| 一覧 | 価格 | 単価 | 円表示 |
| 一覧 | 在庫数 | 在庫数量（物理商品のみ） | 不足時警告色 |
| 一覧 | 評価 | 星評価とスコア | 5段階評価 |
| 一覧 | 年間販売 | 年間販売数 | - |
| 一覧 | ステータス | 販売ステータス | バッジ表示 |

#### 機能仕様
- **在庫管理**: 物理商品の在庫追跡
- **評価システム**: 5段階評価の表示
- **商品タイプ分類**: 物理/デジタル/サービス等の分類
- **在庫アラート**: 最小在庫レベル以下の警告表示
- **カテゴリ管理**: 商品カテゴリの分類

#### 画面遷移
- **詳細画面**: 商品詳細情報・仕様表示
- **編集画面**: 商品情報・在庫数編集
- **新規登録**: 商品登録フォーム

---

### 5. 注文管理画面（OrdersPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/OrdersPage.tsx`
- **URL**: `/orders`
- **用途**: 注文処理・ステータス管理・売上分析
- **認証要否**: 必要

#### 画面構成
```
┌─────────────────────────────────────────────────────────────┐
│ 📝 注文管理 - 注文処理・ステータス管理・売上分析              │
├─────────────────────────────────────────────────────────────┤
│ [検索ボックス] [ステータス▼] [期間▼] [新規注文作成]          │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐              │
│ │ 📋 20    │ │ ⏳ 15    │ │ 💰 45.2億│ │ 📦 2.1k  │              │
│ │ 総注文数  │ │ 処理中   │ │ 総注文額  │ │ 総アイテム│              │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐      │
│ │注文番号│顧客名│注文日│ステータス│商品数│注文額│支払  │配送  │操作  │      │
│ ├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤      │
│ │ORD   │サンプル│2024/│処理中   │3    │¥2.5M│未払い │準備中 │詳細  │      │
│ │202401│自動車 │01/15│       │     │     │     │     │編集  │      │
│ │001   │      │     │       │     │     │     │     │削除  │      │
│ └─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘      │
└─────────────────────────────────────────────────────────────┘
```

#### 主要項目
| 項目分類 | 項目名 | 表示内容 | 備考 |
|---------|-------|----------|------|
| 検索・フィルタ | 検索ボックス | 注文番号、顧客名 | 部分一致検索 |
| 検索・フィルタ | ステータス | 処理中、確認済み、発送済み、配達完了、キャンセル | ドロップダウン |
| 検索・フィルタ | 期間 | 今日、今週、今月、カスタム | ドロップダウン |
| 統計 | 総注文数 | 対象期間の注文総数 | - |
| 統計 | 処理中 | 処理中ステータスの注文数 | - |
| 統計 | 総注文額 | 対象期間の注文金額合計 | 億円単位 |
| 統計 | 総アイテム | 注文アイテムの総数 | - |
| 一覧 | 注文番号 | 自動生成される注文番号 | ORD+日付+連番 |
| 一覧 | 顧客名 | 注文者の顧客名 | - |
| 一覧 | 注文日 | 注文作成日時 | 日付フォーマット |
| 一覧 | ステータス | 注文処理状況 | バッジ表示 |
| 一覧 | 商品数 | 注文に含まれる商品アイテム数 | - |
| 一覧 | 注文額 | 注文の合計金額 | 円表示 |
| 一覧 | 支払状況 | 支払い状況 | 未払い/支払済み |
| 一覧 | 配送状況 | 配送状況 | 準備中/発送済み/配達完了 |

#### 機能仕様
- **注文番号自動生成**: 日付ベースの自動採番
- **ステータス管理**: 注文の進行状況追跡
- **注文明細管理**: 複数商品の注文アイテム管理
- **売上集計**: 期間別売上分析
- **顧客連携**: 顧客情報との連携表示

#### 画面遷移
- **詳細画面**: 注文詳細・明細表示
- **編集画面**: 注文内容・ステータス変更
- **新規作成**: 注文作成フォーム

---

### 6. パートナー管理画面（PartnersPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/PartnersPage.tsx`
- **URL**: `/partners`
- **用途**: ビジネスパートナー情報管理
- **認証要否**: 必要

#### 主要項目
- パートナー企業一覧
- 契約情報
- 取引実績
- 連絡先情報

---

### 7. サプライヤー管理画面（SuppliersPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/SuppliersPage.tsx`
- **URL**: `/suppliers`
- **用途**: 供給業者情報管理
- **認証要否**: 必要

#### 主要項目
- サプライヤー一覧
- 供給商品情報
- 契約条件
- 発注履歴

---

### 8. 請求書管理画面（InvoicesPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/InvoicesPage.tsx`
- **URL**: `/invoices`
- **用途**: 請求書発行・管理
- **認証要否**: 必要

#### 主要項目
- 請求書一覧
- 支払状況
- 請求書作成
- 支払い履歴

---

### 9. 在庫管理画面（InventoryPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/InventoryPage.tsx`
- **URL**: `/inventory`
- **用途**: 在庫状況監視・管理
- **認証要否**: 必要

#### 主要項目
- 在庫一覧
- 在庫レベル
- 発注点管理
- 入出庫履歴

---

### 10. 権限マトリックス画面（PermissionMatrixPage）

#### 基本情報
- **ファイル**: `frontend/src/pages/PermissionMatrixPage.tsx`
- **URL**: `/permissions`
- **用途**: ユーザー権限の可視化・管理
- **認証要否**: 必要（管理者権限推奨）

#### 画面構成
```
┌─────────────────────────────────────────────────────────────┐
│ 🔐 権限マトリックス - 各ユーザーの画面・操作権限一覧          │
├─────────────────────────────────────────────────────────────┤
│ 各ユーザーの画面・操作権限をマトリックス形式で表示します。   │
│ C=作成, R=参照, U=更新, D=削除                              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────┬─────────┬─────────┬─────────┬─────────┬─────────┐    │
│ │ユーザー│顧客登録  │顧客検索  │顧客削除  │注文照会  │注文訂正  │    │
│ │     │    C    │    R    │  R  D  │    R    │  R  U  │    │
│ ├─────┼─────────┼─────────┼─────────┼─────────┼─────────┤    │
│ │admin │    C    │    R    │  R  D  │    R    │  R  U  │    │
│ │(管理者)│         │         │        │         │        │    │
│ ├─────┼─────────┼─────────┼─────────┼─────────┼─────────┤    │
│ │user  │    -    │    R    │  R  -  │    R    │  R  -  │    │
│ │(一般) │         │         │        │         │        │    │
│ └─────┴─────────┴─────────┴─────────┴─────────┴─────────┘    │
├─────────────────────────────────────────────────────────────┤
│ 凡例                                                       │
│ 🟢 C - 作成権限  🔵 R - 参照権限                            │
│ 🟠 U - 更新権限  🔴 D - 削除権限  ⚪ - - 権限なし            │
└─────────────────────────────────────────────────────────────┘
```

#### 主要項目
| 項目分類 | 項目名 | 表示内容 | 備考 |
|---------|-------|----------|------|
| 権限マトリックス | ユーザー | username (role) | 左端固定カラム |
| 権限マトリックス | 画面・操作 | C/R/U/D または - | 権限有無を記号で表示 |
| 凡例 | 権限記号 | 各操作の説明 | 色分け表示 |

#### 機能仕様
- **マトリックス表示**: ユーザー×機能の権限可視化
- **色分け表示**: 操作種別による背景色変更
- **権限記号**: C（作成）/R（参照）/U（更新）/D（削除）
- **レスポンシブ**: 横スクロール対応

#### 対象画面・操作
1. **顧客登録**: 作成権限
2. **顧客検索**: 参照権限
3. **顧客削除**: 参照・削除権限
4. **顧客登録フォーム**: 参照・作成権限
5. **注文照会**: 参照権限
6. **注文訂正**: 参照・更新権限
7. **注文取消**: 参照・削除権限

## 🔄 画面遷移図

```
┌─────────────┐    ┌─────────────┐
│ LoginPage   │───▶│ DashboardPage│
└─────────────┘    └─────────────┘
                           │
                   ┌───────┼───────┐
                   ▼       ▼       ▼
            ┌─────────┐ ┌─────────┐ ┌─────────┐
            │Customers│ │Products │ │Orders   │
            └─────────┘ └─────────┘ └─────────┘
                   │       │       │
                   ▼       ▼       ▼
            ┌─────────┐ ┌─────────┐ ┌─────────┐
            │Partners │ │Suppliers│ │Invoices │
            └─────────┘ └─────────┘ └─────────┘
                   │       │       │
                   ▼       ▼       ▼
            ┌─────────┐ ┌─────────┐ ┌─────────┐
            │Inventory│ │Permission│ │(将来拡張)│
            └─────────┘ └─────────┘ └─────────┘
```

## 📊 レスポンシブ対応

### ブレークポイント
- **Mobile**: ~768px
- **Tablet**: 768px~1024px
- **Desktop**: 1024px~

### 対応内容
- **モバイル**: 単列レイアウト、コンパクトテーブル
- **タブレット**: 2列レイアウト、横スクロールテーブル
- **デスクトップ**: 多列レイアウト、フル機能テーブル

## 🔐 権限制御

### 画面レベル制御
- **認証チェック**: ProtectedRoute コンポーネント
- **ロール制御**: admin/user によるアクセス制限

### 機能レベル制御
- **CRUD操作**: 権限マトリックスによる細かい制御
- **UI表示**: 権限に応じたボタン・機能の表示/非表示

## 🎨 UI コンポーネント

### 共通コンポーネント
- **Layout**: 全画面共通レイアウト
- **ProtectedRoute**: 認証保護ルート
- **Button**: 統一スタイルボタン
- **Table**: データテーブル
- **StatusBadge**: ステータス表示バッジ
- **SearchBox**: 検索入力フィールド

### 専用コンポーネント
- **StatsCard**: 統計カード
- **PermissionMatrix**: 権限マトリックス表
- **ChartComponent**: グラフ表示

---

*最終更新: 2024年1月15日*  
*作成者: システムアナリスト*
